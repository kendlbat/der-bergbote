---
import AppSkeleton from "@/components/astro/AppSkeleton.astro";
import Layout from "@/layouts/Layout.astro";
import { Image } from "astro:assets";
import { articlesTable } from "@/db/schema";
import { db } from "@/db";

import bergboteNoLogo from "@/assets/bergbote_nologo.png";
import ArticleGuessingCard from "@/components/astro/articles/ArticleGuessingCard.astro";

const articles = await db.select().from(articlesTable);
const article = articles[Math.floor(Math.random() * articles.length)];
---

<Layout title="Bergbote - Home">
    <AppSkeleton>
        <Image
            src={bergboteNoLogo}
            alt="Bergbote"
            class="w-full object-contain"
        />
        <ArticleGuessingCard article={article}/>
    </AppSkeleton>
</Layout>
